# UniVibe Architecture - Refactored Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        UniVibe Application                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRESENTATION LAYER                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pages/                                                          â”‚
â”‚  â”œâ”€â”€ PlanEvents/                                                 â”‚
â”‚  â”‚   â”œâ”€â”€ PlanEvents.jsx  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   â””â”€â”€ PlanEvents.module.scss    â”‚                           â”‚
â”‚  â”œâ”€â”€ EventDetails/                  â”‚                           â”‚
â”‚  â”œâ”€â”€ Communities/                   â”‚                           â”‚
â”‚  â””â”€â”€ ...                            â”‚                           â”‚
â”‚                                     â”‚                           â”‚
â”‚  Components/                        â”‚                           â”‚
â”‚  â”œâ”€â”€ Notifications/                 â”‚                           â”‚
â”‚  â”‚   â”œâ”€â”€ Notifications.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   â””â”€â”€ Notifications.module.scss â”‚     â”‚                    â”‚
â”‚  â”œâ”€â”€ Navbar/                        â”‚     â”‚                    â”‚
â”‚  â””â”€â”€ Footer/                        â”‚     â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚     â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  COMMON COMPONENTS     â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                            â”‚  Components/common/    â”‚
                            â”‚  â”œâ”€â”€ StatusBadge       â”‚â—„â”€â”€â”€ Reusable
                            â”‚  â”œâ”€â”€ RevisionSection   â”‚â—„â”€â”€â”€ UI Components
                            â”‚  â””â”€â”€ ActionButtons     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                             â–¼     â–¼                         â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
        â”‚         â”‚        BUSINESS LOGIC LAYER           â”‚          â”‚
        â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
        â”‚         â”‚  utils/                               â”‚          â”‚
        â”‚         â”‚  â”œâ”€â”€ eventHelpers.js                  â”‚          â”‚
        â”‚         â”‚  â”‚   â€¢ getStatusLabel()               â”‚â—„â”€â”€â”€ Status
        â”‚         â”‚  â”‚   â€¢ getStatusClass()               â”‚     Utils
        â”‚         â”‚  â”‚   â€¢ formatEventDate()              â”‚
        â”‚         â”‚  â”‚   â€¢ mapEventWithApprovalStatus()   â”‚
        â”‚         â”‚  â”‚                                    â”‚
        â”‚         â”‚  â”œâ”€â”€ notificationHelpers.js           â”‚
        â”‚         â”‚  â”‚   â€¢ approveEventByRole()           â”‚â—„â”€â”€â”€ Workflow
        â”‚         â”‚  â”‚   â€¢ requestRevisionByRole()        â”‚     Logic
        â”‚         â”‚  â”‚   â€¢ rejectEventByRole()            â”‚
        â”‚         â”‚  â”‚   â€¢ cleanupNotificationState()     â”‚
        â”‚         â”‚  â”‚                                    â”‚
        â”‚         â”‚  â”œâ”€â”€ roleHelpers.js                   â”‚
        â”‚         â”‚  â”‚   â€¢ canPlanEvents()                â”‚â—„â”€â”€â”€ Permission
        â”‚         â”‚  â”‚   â€¢ canApproveFaculty()            â”‚     Checks
        â”‚         â”‚  â”‚   â€¢ canRejectPermanently()         â”‚
        â”‚         â”‚  â”‚                                    â”‚
        â”‚         â”‚  â””â”€â”€ toastHelpers.js                  â”‚
        â”‚         â”‚      â€¢ createToast()                  â”‚â—„â”€â”€â”€ UI Utils
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                             â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚          TYPE DEFINITIONS             â”‚
        â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚         â”‚  types/                               â”‚
        â”‚         â”‚  â””â”€â”€ event.types.js                   â”‚
        â”‚         â”‚      â€¢ EventStatus                    â”‚â—„â”€â”€â”€ Constants
        â”‚         â”‚      â€¢ UserRole                       â”‚     & Types
        â”‚         â”‚      â€¢ NotificationType               â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         DATA LAYER                 â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  lib/api.js                        â”‚
                    â”‚  â”œâ”€â”€ getEvents()                   â”‚
                    â”‚  â”œâ”€â”€ createEvent()                 â”‚
                    â”‚  â”œâ”€â”€ approveFacultyEvent()         â”‚â—„â”€â”€â”€ API Client
                    â”‚  â”œâ”€â”€ approveDeanEvent()            â”‚
                    â”‚  â”œâ”€â”€ respondToRevision()           â”‚
                    â”‚  â””â”€â”€ ...                           â”‚
                    â”‚                                    â”‚
                    â”‚  contexts/                         â”‚
                    â”‚  â”œâ”€â”€ AdminAuthContext              â”‚â—„â”€â”€â”€ State
                    â”‚  â””â”€â”€ CommunitiesContext            â”‚     Management
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       BACKEND (Node.js/Express)    â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  server/                           â”‚
                    â”‚  â”œâ”€â”€ controllers/                  â”‚
                    â”‚  â”‚   â”œâ”€â”€ eventController.js        â”‚
                    â”‚  â”‚   â”œâ”€â”€ notificationController.js â”‚
                    â”‚  â”‚   â””â”€â”€ authController.js         â”‚
                    â”‚  â”œâ”€â”€ routes/                       â”‚
                    â”‚  â”œâ”€â”€ middleware/                   â”‚
                    â”‚  â””â”€â”€ prisma/                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      DATABASE (PostgreSQL)         â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  â€¢ Events                          â”‚
                    â”‚  â€¢ Notifications                   â”‚
                    â”‚  â€¢ Users (Admins)                  â”‚
                    â”‚  â€¢ Communities                     â”‚
                    â”‚  â€¢ Colleges                        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Examples

### Example 1: Event Approval Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks  â”‚
â”‚ "Approve"    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notifications.jsx                       â”‚
â”‚ â€¢ handleApprove(notification)           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ notificationHelpers.js                  â”‚
â”‚ â€¢ approveEventByRole(eventId, role)     â”‚
â”‚   â”œâ”€ Determines correct API endpoint    â”‚
â”‚   â””â”€ Calls appropriate function         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ lib/api.js                              â”‚
â”‚ â€¢ approveFacultyEvent() OR              â”‚
â”‚ â€¢ approveDeanEvent() OR                 â”‚
â”‚ â€¢ approveDeanshipEvent()                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: eventController.js             â”‚
â”‚ â€¢ Updates event status in database      â”‚
â”‚ â€¢ Creates notification                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database: Update Event & Notification   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ notificationHelpers.js                  â”‚
â”‚ â€¢ cleanupNotificationState()            â”‚
â”‚   â”œâ”€ Marks notification as read         â”‚
â”‚   â”œâ”€ Removes from local state           â”‚
â”‚   â”œâ”€ Clears cache                       â”‚
â”‚   â””â”€ Dispatches event for refresh       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 2: Status Badge Rendering

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PlanEvents   â”‚
â”‚ renders      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <StatusBadge status={event.status} />   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StatusBadge.jsx                         â”‚
â”‚ â€¢ Receives status prop                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ eventHelpers.js                         â”‚
â”‚ â€¢ getStatusLabel(status)                â”‚
â”‚   â†’ "Pending Dean of Faculty"           â”‚
â”‚ â€¢ getStatusClass(status)                â”‚
â”‚   â†’ "pending"                           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StatusBadge.module.scss                 â”‚
â”‚ â€¢ .statusBadge.pending                  â”‚
â”‚   â†’ gray border, gray text              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Dependency Graph

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   App    â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                  â”‚                  â”‚
          â–¼                  â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚PlanEventsâ”‚      â”‚Notificationsâ”‚    â”‚EventCal  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          â”‚          â”‚
        â–¼          â–¼          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Status  â”‚ â”‚Revisionâ”‚ â”‚Action  â”‚
   â”‚Badge   â”‚ â”‚Section â”‚ â”‚Buttons â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚         â”‚          â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚         â”‚
             â–¼         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  eventHelpers   â”‚
        â”‚  roleHelpers    â”‚
        â”‚  notification   â”‚
        â”‚  Helpers        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Types â”‚
            â”‚ (const)â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Utility Function Usage Map

```
getStatusLabel()
â”œâ”€â”€ Used by: StatusBadge.jsx
â”œâ”€â”€ Used by: PlanEvents.jsx (before refactor)
â””â”€â”€ Used by: Notifications.jsx (before refactor)

getStatusClass()
â”œâ”€â”€ Used by: StatusBadge.jsx
â””â”€â”€ Used by: PlanEvents.jsx (before refactor)

approveEventByRole()
â”œâ”€â”€ Used by: Notifications.jsx â†’ handleApprove()
â””â”€â”€ Replaces: 15+ lines of role-checking code

requestRevisionByRole()
â”œâ”€â”€ Used by: Notifications.jsx â†’ handleDeny()
â””â”€â”€ Replaces: 15+ lines of role-checking code

rejectEventByRole()
â”œâ”€â”€ Used by: Notifications.jsx â†’ handleReject()
â””â”€â”€ Replaces: 10+ lines of role-checking code

canRejectPermanently()
â”œâ”€â”€ Used by: Notifications.jsx â†’ button visibility
â””â”€â”€ Replaces: Inline role comparisons

formatEventDate()
â”œâ”€â”€ Used by: PlanEvents.jsx
â”œâ”€â”€ Used by: EventCalendar.jsx
â””â”€â”€ Used by: EventDetails.jsx

mapEventWithApprovalStatus()
â”œâ”€â”€ Used by: PlanEvents.jsx â†’ fetchEvents()
â””â”€â”€ Used by: EventCalendar.jsx â†’ fetchEvents()
```

## File Size Comparison

```
Before Refactoring:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File                 â”‚ Lines   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Notifications.jsx    â”‚ 635     â”‚
â”‚ PlanEvents.jsx       â”‚ 744     â”‚
â”‚ (duplicate code)     â”‚ ~230    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total                â”‚ 1,609   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

After Refactoring:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File                 â”‚ Lines   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Notifications.jsx    â”‚ 485     â”‚
â”‚ PlanEvents.jsx       â”‚ 680     â”‚
â”‚ eventHelpers.js      â”‚ 75      â”‚
â”‚ notification         â”‚         â”‚
â”‚ Helpers.js           â”‚ 80      â”‚
â”‚ roleHelpers.js       â”‚ 45      â”‚
â”‚ toastHelpers.js      â”‚ 15      â”‚
â”‚ StatusBadge.jsx      â”‚ 20      â”‚
â”‚ RevisionSection.jsx  â”‚ 60      â”‚
â”‚ ActionButtons.jsx    â”‚ 40      â”‚
â”‚ (SCSS files)         â”‚ 150     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total                â”‚ 1,650   â”‚
â”‚ Effective (no dup)   â”‚ 1,379   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Savings              â”‚ ~230    â”‚
â”‚ Improvement          â”‚ -14.3%  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: While total lines increased slightly due to new files,
effective code (without duplication) decreased significantly.
Code is now more maintainable, testable, and reusable.
```

## Import Hierarchy

```
Page Components
    â”œâ”€â”€ import { StatusBadge, RevisionSection } from 'common'
    â”œâ”€â”€ import { getStatusLabel, approveEventByRole } from 'utils'
    â””â”€â”€ import { EventStatus, UserRole } from 'types'
         
Common Components
    â”œâ”€â”€ import { getStatusLabel, getStatusClass } from 'utils'
    â””â”€â”€ import styles from './Component.module.scss'

Utility Functions
    â”œâ”€â”€ import api from 'lib/api'
    â””â”€â”€ import { EventStatus, UserRole } from 'types'

Type Definitions
    â””â”€â”€ (no dependencies - constants only)
```

## Color Coding Legend

```
ğŸŸ¢ Pure Components (no side effects)
   â””â”€â”€ StatusBadge, RevisionSection, ActionButtons

ğŸ”µ Utility Functions (business logic)
   â””â”€â”€ eventHelpers, notificationHelpers, roleHelpers

ğŸŸ¡ Page Components (orchestration)
   â””â”€â”€ PlanEvents, Notifications, EventCalendar

ğŸŸ  Type Definitions (constants)
   â””â”€â”€ event.types

ğŸ”´ API Layer (data access)
   â””â”€â”€ lib/api

âš« Backend (server-side)
   â””â”€â”€ controllers, routes
```

This architecture provides:
- âœ… Clear separation of concerns
- âœ… Unidirectional data flow
- âœ… Reusable components and utilities
- âœ… Type safety with constants
- âœ… Testable isolated functions
- âœ… Maintainable codebase
